# Smoke Test Scheduler Configuration
# Mirrors production scheduler config but with:
# - Smoke test ports
# - Simplified nightly maintenance (single repo, haiku model)

port: 19010

# Director URL for session tracking
director_url: http://localhost:18080

# Direct agent URL (fallback)
agent_url: http://localhost:19000

jobs:
  - name: smoke-test
    schedule: "0 0 31 2 *"  # Never auto-runs (Feb 31)
    model: haiku
    timeout: 60s
    prompt: |
      This is a smoke test. Reply with exactly: "Smoke test OK"

  - name: smoke-nightly-maintenance
    schedule: "0 0 31 2 *"  # Never auto-runs (Feb 31)
    model: haiku
    timeout: 5m
    prompt: |
      # Smoke Test Nightly Maintenance

      This is a simplified nightly maintenance task for smoke testing.
      Perform maintenance tasks on the helloworld2 repository only.

      ## Target Repository
      - helloworld2

      ## Tasks

      ### 1. Code Cleanup
      - Remove dead code and unused imports
      - Fix obvious code style issues

      ### 2. Testing
      - Run the test suite and fix any failing tests

      ### 3. Report
      - Summarise what you found and what you did

      ## Workflow

      1. Clone from alan-phobos-org/helloworld2
      2. Run tests to establish baseline
      3. Perform maintenance tasks
      4. Run tests again to verify no regressions
      5. Commit changes with descriptive messages

  - name: daily-newsletter
    schedule: "0 6 * * *"  # 06:00 UTC daily
    model: opus
    timeout: 30m
    prompt: |
      Build today's newsletter, commit it, push, and merge the resulting PR to main.

      ## Setup
      - Ensure you have the latest head of main: `git fetch origin && git checkout main && git pull`

      ## Tasks
      1. Build today's newsletter ({{.Date}})
      2. Create a new branch for the newsletter
      3. Commit the newsletter changes
      4. Push the branch
      5. Create a pull request
      6. Merge the PR to main

      When complete, provide a brief summary in <summary> tags:
      <summary>
      Newsletter status for {{.Date}}
      </summary>
